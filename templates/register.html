{% extends "layout.html" %}
{% block content %}
<div class="glass p-8 rounded-lg max-w-md mx-auto">
    <h2 class="text-2xl neon mb-6 text-center">Register</h2>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="mb-4 p-3 {% if category == 'error' %}bg-red-500{% else %}bg-green-500{% endif %} text-white rounded">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <form method="POST" action="/register">
        <div class="mb-4">
            <label class="block mb-2">Username</label>
            <input type="text" name="username"
                   class="w-full p-2 rounded bg-gray-700"
                   pattern="[A-Za-z0-9]{3,20}"
                   title="3-20 alphanumeric characters"
                   required>
            <p class="text-sm text-gray-400 mt-1">Letters & numbers only (3-20 chars)</p>
        </div>

        <div class="mb-4">
            <label class="block mb-2">Email</label>
            <input type="email" name="email"
                   class="w-full p-2 rounded bg-gray-700"
                   required>
        </div>

        <div class="mb-4">
            <label class="block mb-2">Password</label>
            <input type="password" name="password"
                   class="w-full p-2 rounded bg-gray-700"
                   minlength="8"
                   pattern="^(?=.*\d).{8,}$"
                   title="At least 8 characters with 1 number"
                   required>
            <p class="text-sm text-gray-400 mt-1">8+ characters with at least 1 number</p>
        </div>

        <div class="mb-6">
            <label class="block mb-2">Confirm Password</label>
            <input type="password" name="confirm_password"
                   class="w-full p-2 rounded bg-gray-700"
                   required>
        </div>

        <button type="submit" class="btn-glow w-full py-2">Register</button>
    </form>

    <p class="text-center mt-4">
        Already have an account? <a href="/login" class="text-blue-400 hover:underline">Login here</a>
    </p>
</div>
{% endblock %}